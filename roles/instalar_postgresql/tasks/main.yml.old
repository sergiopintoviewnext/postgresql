---
#- name: Add repository
#  ansible.builtin.yum_repository:
#    name: epel
#    description: EPEL YUM repo
#    baseurl: https://download.fedoraproject.org/pub/epel/$releasever/$basearch/

#- name: gpg key de epel
#  rpm_key:
#    key: https://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-8
#    key: http://download.postgresql.org/pub/repos/yum/RPM-GPG-KEY-PGDG-AARCH64-RHEL8
#    state: present

#- name: instalar epel
#  yum:
#    name: https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
#    name: http://yum.postgresql.org/8.4/redhat/rhel-8-x86_64/pgdg-redhat-8.4-3.noarch.rpm
#    name: http://mirror.centos.org/centos/7/os/x86_64/Packages/appstream-data-7-20180614.el7.noarch.rpm
#    name: https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm
#    name: https://download.postgresql.org/pub/repos/yum/15/redhat/rhel-8.4-x86_64/postgresql15-server-15.1-1PGDG.rhel8.x86_64.rpm
#    state: latest

#- name: instalar py
#  pip:
#    name: psycopg2-binary

#- name: "Stage 1: install repository package"
#  yum: 
#    state: present
#    name: "{{ item }}"
#  when: item.version == "{{ postgresql_version }}"
#  with_items: postgresql_repo_{{ ansible_distribution }}


- name: Instalar postgresql
  yum:
    name: "{{ item }}"
    state: latest
    update_cache: true
  with_items:
#    - libpq
    - postgresql
    - postgresql-server
